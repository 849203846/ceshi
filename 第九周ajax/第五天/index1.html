<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<button>
    新增
</button>
<div class="box1">
    <h2>
        <span>编号</span><span>姓名</span><span>年龄</span><span>电话</span><span>地址</span><span>操作</span>
    </h2>


    <ul id="list">
    </ul>
</div>
<script>

    var list=document.getElementById('list');
    function list() {
        ajax({
            url:'getlist',
            success:function (jsondata) {
                if(jsondata.code==0){
                    var data=jsondata['data'];
                    splist(data)
                }
                alert(jsondata.mse)
            }
        })
    }
    list();
    function splist(data) {
        var str=``;
        for(var i=0;i<data.length;i++){
            str+=`
                  <li>
            <span>${data['id']}</span>
            <span>${data['name']}</span>
            <span>${data['age']}</span>
            <span>${data['phone']}</span>
            <span>${data['addess']}</span>
            <span>
            <a href="add.html?id='${data['id']}'">修改</a>
            <a href="javascript:;"  con="${data['id']}">删除</a>
        </span>
        </li>
            `
        }
        list.innerHTML=str
    }

    list.onclick=function (e) {
        e=e||window.event;
        let tar=e.target||e.srcElement;
        if(tar.innerHTML=='删除'){
            let newid=tar.getAttribute('con');
            let fiag=window.confirm('你确定要删除编号为'+newid+'吗？');
            if(flag){
                ajax({
                    url:'removeinfo?id='+newid,
                    success:function (jsondata) {
                        if(jsondata.code==0){
                            list.removeChild(tar.parentNode.parentNode)
                            return
                        }
                        alert(jsondata.mse)
                    }

                })
            }
        }
    }






</script>
</body>
</html>